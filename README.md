[English Version](README_eng.md)
---

# Simple QB: Легкий генератор SQL-запросов для PostgreSQL

Simple Query Builder for PGX - Простой и мощный инструмент для генерации SQL-запросов при работе с базой данных PostgreSQL. Используйте аннотации полей структуры для автоматической генерации запросов на основе ваших моделей.

## Особенности

- **Простота использования:** Создавайте запросы легко и быстро.
- **Автоматическая генерация запросов:** Запросы создаются автоматически на основе вашей модели данных.
- **Низкое влияние на производительность:** Оптимизация запросов обеспечивает высокую скорость выполнения. (но это не точно)

---

## Примечание

Пока для пакета драйвера pgx для работы в PostgreSQL

## Установка

Добавьте пакет в ваш проект:

```sh
go get github.com/Darkhan-Sol0/simple_qb
```

Импортируйте пакет в ваш код:

```go
import "github.com/Darkhan-Sol0/simple_qb"
```

---

## Начало работы

Перед использованием пакета необходимо описать структуру данных с аннотациями полей. Аннотация `db:"имя_поля"` устанавливает соответствие полей структуры с полями в базе данных.

### Пример структуры:

```go
type S struct {
	N int    `db:"num"`
	T string `db:"text"`
}

```

| Поле          | Назначение                  |
|-------------------|----------------------------|
| `db:"имя_поля"`   | Имя поля в базе данных       |


---

## Генерация запросов

### Конструктор New:

```go
q := New("table")
```

### Генерация Params:

```go
q := New("table").Params(NewParam("num").Eq(42), NewParam("text").NotNull().Or())
```

### Генерация запроса INSERT:

```go
q := New("table").Insert(S{N: 123, T: "asd"})
```

### Генерация запроса SELECT:

```go
q := New("table").Select(S{N: 123, T: "asd"})
```

### Генерация запроса UPDATE:

```go
q := New("table").Update(S{N: 123, T: "asd"})
```

### Генерация запроса DELETE:

```go
q := New("table").Delete()
```

### Генерация OrderBY:

```go
q := New("table").OrderBy("num", "ASC")
```

### Генерация Limit:

```go
q := New("table").Limit(10, 10)
```

### Полная генерация

```go
a, b := New("table").Select(S{N: 123, T: "asd"}).Params(NewParam("num"), NewParam("text", "gt", "qwe").Or()).OrderBy("num", "ASC").Limit(10, 10).Generate()

```

---

## API пакета

Основные функции пакета:
Простая генерация строки SQL запроса.

---

## Примеры запросов

### Пример получаемых запросов:

```sql
INSERT INTO users (num, text) VALUES ($1, $2)
SELECT num, text FROM users
SELECT num, text FROM users WHERE num = $1
UPDATE users SET (num, text) = ($1, $2) WHERE num = $3
UPDATE users SET (num, text) = ($1, $2) WHERE num >= $3
DELETE FROM users WHERE num = $1
```
---

## Поддерживаемые версии Go

- Минимальная поддерживаемая версия Go: 1.22+

---

## Авторские права и лицензия

Данный пакет предоставляется бесплатно и с открытым исходным кодом. Вы можете свободно использовать его в своих проектах.

---

## Обратная связь

Если у вас возникли вопросы или есть предложения по улучшению, свяжитесь с автором через указанные контакты.

## PS

**Внимание:** Данный пакет является экспериментальным и активно развивается. Если вы хотите принять участие в разработке или оставить отзыв, пожалуйста, свяжитесь с автором.

## ToDo

- Улучшение системы фильтрации.
- Добавление обработки ошибок.
- Работа с нулевыми значениями.
- Другие улучшения.

---
